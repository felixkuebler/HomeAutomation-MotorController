EESchema Schematic File Version 2
LIBS:power
LIBS:device
LIBS:transistors
LIBS:conn
LIBS:linear
LIBS:regul
LIBS:74xx
LIBS:cmos4000
LIBS:adc-dac
LIBS:memory
LIBS:xilinx
LIBS:microcontrollers
LIBS:dsp
LIBS:microchip
LIBS:analog_switches
LIBS:74xgxx
LIBS:motorola
LIBS:texas
LIBS:intel
LIBS:audio
LIBS:interface
LIBS:digital-audio
LIBS:philips
LIBS:display
LIBS:cypress
LIBS:siliconi
LIBS:opto
LIBS:atmel
LIBS:contrib
LIBS:valves
LIBS:ESP8266
LIBS:HILINK
LIBS:SSR
LIBS:switches
LIBS:L9110
LIBS:pololu_a4988
LIBS:Nema17
LIBS:TMC2130
LIBS:iot_motor_controller_controller-cache
EELAYER 25 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 1 1
Title "IOT Relay + Switch"
Date "2017-05-30"
Rev "1.1.0"
Comp "Felix KÃ¼bler"
Comment1 ""
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
$Comp
L ESP-12E U4
U 1 1 592BD8DB
P 7650 3050
F 0 "U4" H 7650 3775 50  0000 C CNN
F 1 "ESP-12E" H 7650 3700 50  0000 C CNN
F 2 "ESP8266:ESP-12E_SMD" H 7650 3050 50  0001 C CNN
F 3 "" H 7650 3050 50  0001 C CNN
	1    7650 3050
	1    0    0    -1  
$EndComp
$Comp
L CONN_01X06 J1
U 1 1 592BDEB8
P 3200 1525
F 0 "J1" H 3200 1950 50  0000 C CNN
F 1 "MPE 094-1-006" H 3475 1875 50  0000 C CNN
F 2 "Socket_Strips:Socket_Strip_Angled_1x06_Pitch2.54mm" H 3200 1525 50  0001 C CNN
F 3 "" H 3200 1525 50  0001 C CNN
	1    3200 1525
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR01
U 1 1 592C2849
P 8750 3450
F 0 "#PWR01" H 8750 3200 50  0001 C CNN
F 1 "GND" V 8650 3375 50  0000 C CNN
F 2 "" H 8750 3450 50  0001 C CNN
F 3 "" H 8750 3450 50  0001 C CNN
	1    8750 3450
	0    -1   -1   0   
$EndComp
$Comp
L +3.3V #PWR02
U 1 1 592C2C75
P 6550 3450
F 0 "#PWR02" H 6550 3300 50  0001 C CNN
F 1 "+3.3V" V 6450 3525 50  0000 C CNN
F 2 "" H 6550 3450 50  0001 C CNN
F 3 "" H 6550 3450 50  0001 C CNN
	1    6550 3450
	0    -1   -1   0   
$EndComp
$Comp
L +3.3V #PWR03
U 1 1 592C2CAB
P 6550 2950
F 0 "#PWR03" H 6550 2800 50  0001 C CNN
F 1 "+3.3V" V 6625 3050 50  0000 C CNN
F 2 "" H 6550 2950 50  0001 C CNN
F 3 "" H 6550 2950 50  0001 C CNN
	1    6550 2950
	0    -1   -1   0   
$EndComp
Text GLabel 9100 2600 2    60   Input ~ 0
TX
Text GLabel 9100 2750 2    60   Input ~ 0
RX
Text GLabel 8700 3150 2    60   Input ~ 0
MODE
Text GLabel 6100 3300 0    60   Input ~ 0
MOTOR_STEP
Text GLabel 6100 3450 0    60   Input ~ 0
MOTOR_DIR
NoConn ~ 6750 2750
NoConn ~ 7600 3950
NoConn ~ 7700 3950
$Comp
L GND #PWR04
U 1 1 592C460C
P 2850 1775
F 0 "#PWR04" H 2850 1525 50  0001 C CNN
F 1 "GND" V 2900 1575 50  0000 C CNN
F 2 "" H 2850 1775 50  0001 C CNN
F 3 "" H 2850 1775 50  0001 C CNN
	1    2850 1775
	0    1    1    0   
$EndComp
Text GLabel 2600 1475 0    60   Input ~ 0
RX
Text GLabel 2600 1325 0    60   Input ~ 0
TX
NoConn ~ 3000 1275
NoConn ~ 3000 1675
Text GLabel 2525 2525 0    60   Input ~ 0
MODE
$Comp
L GND #PWR05
U 1 1 592C5F8F
P 2900 2425
F 0 "#PWR05" H 2900 2175 50  0001 C CNN
F 1 "GND" V 2900 2225 50  0000 C CNN
F 2 "" H 2900 2425 50  0001 C CNN
F 3 "" H 2900 2425 50  0001 C CNN
	1    2900 2425
	0    1    1    0   
$EndComp
$Comp
L +3.3V #PWR06
U 1 1 592C600F
P 2900 2625
F 0 "#PWR06" H 2900 2475 50  0001 C CNN
F 1 "+3.3V" V 2900 2875 50  0000 C CNN
F 2 "" H 2900 2625 50  0001 C CNN
F 3 "" H 2900 2625 50  0001 C CNN
	1    2900 2625
	0    -1   -1   0   
$EndComp
$Comp
L +3.3V #PWR07
U 1 1 595EB4E9
P 9100 3250
F 0 "#PWR07" H 9100 3100 50  0001 C CNN
F 1 "+3.3V" V 9150 3450 50  0000 C CNN
F 2 "" H 9100 3250 50  0001 C CNN
F 3 "" H 9100 3250 50  0001 C CNN
	1    9100 3250
	0    1    1    0   
$EndComp
$Comp
L SW_DPST_x2 SW2
U 1 1 599EBC5A
P 2450 3200
F 0 "SW2" H 2450 3100 50  0000 C CNN
F 1 "SW_DPST_x2" H 2450 3000 50  0000 C CNN
F 2 "Buttons_Switches_SMD:SW_SPST_SKQG" H 2450 3200 50  0001 C CNN
F 3 "" H 2450 3200 50  0001 C CNN
	1    2450 3200
	1    0    0    -1  
$EndComp
$Comp
L +3.3V #PWR08
U 1 1 599EBD49
P 2100 3200
F 0 "#PWR08" H 2100 3050 50  0001 C CNN
F 1 "+3.3V" V 2100 3450 50  0000 C CNN
F 2 "" H 2100 3200 50  0001 C CNN
F 3 "" H 2100 3200 50  0001 C CNN
	1    2100 3200
	0    -1   -1   0   
$EndComp
$Comp
L R R5
U 1 1 599EC273
P 3000 3350
F 0 "R5" V 3080 3350 50  0000 C CNN
F 1 "RND 0805 1 10K" V 3150 3350 50  0000 C CNN
F 2 "Resistors_SMD:R_0805" V 2930 3350 50  0001 C CNN
F 3 "" H 3000 3350 50  0001 C CNN
	1    3000 3350
	0    1    1    0   
$EndComp
$Comp
L GND #PWR09
U 1 1 599EC69C
P 3300 3350
F 0 "#PWR09" H 3300 3100 50  0001 C CNN
F 1 "GND" V 3300 3150 50  0000 C CNN
F 2 "" H 3300 3350 50  0001 C CNN
F 3 "" H 3300 3350 50  0001 C CNN
	1    3300 3350
	0    -1   -1   0   
$EndComp
Text GLabel 3100 3200 2    60   Input ~ 0
RESET
Text GLabel 9100 3050 2    60   Input ~ 0
RESET
$Comp
L +3.3V #PWR010
U 1 1 5A1C2463
P 2850 1575
F 0 "#PWR010" H 2850 1425 50  0001 C CNN
F 1 "+3.3V" V 2775 1800 50  0000 C CNN
F 2 "" H 2850 1575 50  0001 C CNN
F 3 "" H 2850 1575 50  0001 C CNN
	1    2850 1575
	0    -1   -1   0   
$EndComp
$Comp
L Nema17 U2
U 1 1 5A280431
P 6450 1500
F 0 "U2" H 6450 1700 60  0000 C CNN
F 1 "Nema17" H 6450 1600 60  0000 C CNN
F 2 "Nema17:Nema17" H 6450 1500 60  0001 C CNN
F 3 "" H 6450 1500 60  0001 C CNN
	1    6450 1500
	1    0    0    -1  
$EndComp
$Comp
L +3.3V #PWR011
U 1 1 5A281267
P 5800 1300
F 0 "#PWR011" H 5800 1150 50  0001 C CNN
F 1 "+3.3V" V 5800 1525 50  0000 C CNN
F 2 "" H 5800 1300 50  0001 C CNN
F 3 "" H 5800 1300 50  0001 C CNN
	1    5800 1300
	0    -1   -1   0   
$EndComp
$Comp
L GND #PWR012
U 1 1 5A281299
P 5800 1500
F 0 "#PWR012" H 5800 1250 50  0001 C CNN
F 1 "GND" V 5800 1300 50  0000 C CNN
F 2 "" H 5800 1500 50  0001 C CNN
F 3 "" H 5800 1500 50  0001 C CNN
	1    5800 1500
	0    1    1    0   
$EndComp
$Comp
L +12V #PWR013
U 1 1 5A28149F
P 5800 1400
F 0 "#PWR013" H 5800 1250 50  0001 C CNN
F 1 "+12V" V 5800 1625 50  0000 C CNN
F 2 "" H 5800 1400 50  0001 C CNN
F 3 "" H 5800 1400 50  0001 C CNN
	1    5800 1400
	0    -1   -1   0   
$EndComp
$Comp
L GND #PWR014
U 1 1 5A281CD9
P 7100 1700
F 0 "#PWR014" H 7100 1450 50  0001 C CNN
F 1 "GND" V 7100 1500 50  0000 C CNN
F 2 "" H 7100 1700 50  0001 C CNN
F 3 "" H 7100 1700 50  0001 C CNN
	1    7100 1700
	0    -1   -1   0   
$EndComp
NoConn ~ 7000 1400
NoConn ~ 7000 1500
Text GLabel 9100 2900 2    60   Input ~ 0
MOTOR_ENABLE
Wire Wire Line
	8550 3450 8750 3450
Wire Wire Line
	8550 3350 8650 3350
Wire Wire Line
	8650 3350 8650 3450
Connection ~ 8650 3450
Wire Wire Line
	6750 2950 6550 2950
Wire Wire Line
	6550 3450 6750 3450
Wire Wire Line
	6750 3250 6250 3250
Wire Wire Line
	6250 3250 6250 3300
Wire Wire Line
	6300 3450 6300 3350
Wire Wire Line
	6300 3350 6750 3350
Wire Wire Line
	6250 3300 6100 3300
Wire Wire Line
	6100 3450 6300 3450
Wire Wire Line
	8700 3150 8550 3150
Wire Wire Line
	3000 1475 2600 1475
Wire Wire Line
	3000 1375 2750 1375
Wire Wire Line
	2750 1375 2750 1325
Wire Wire Line
	2750 1325 2600 1325
Wire Wire Line
	2850 1575 3000 1575
Wire Wire Line
	3000 1775 2850 1775
Wire Wire Line
	2525 2525 3000 2525
Wire Wire Line
	8550 3250 9100 3250
Wire Wire Line
	2100 3200 2250 3200
Wire Wire Line
	3150 3350 3300 3350
Wire Wire Line
	2650 3200 3100 3200
Wire Wire Line
	2850 3350 2850 3200
Connection ~ 2850 3200
Wire Wire Line
	9100 3050 8550 3050
Wire Wire Line
	5800 1300 5900 1300
Wire Wire Line
	5800 1400 5900 1400
Wire Wire Line
	5900 1500 5800 1500
Wire Wire Line
	7000 1700 7100 1700
Wire Wire Line
	8550 2950 8950 2950
Wire Wire Line
	8950 2950 8950 2900
Wire Wire Line
	8950 2900 9100 2900
Wire Wire Line
	8550 2850 8850 2850
Wire Wire Line
	8850 2850 8850 2750
Wire Wire Line
	8850 2750 9100 2750
Wire Wire Line
	8550 2750 8750 2750
Wire Wire Line
	8750 2750 8750 2600
Wire Wire Line
	8750 2600 9100 2600
$Comp
L LD1117S33CTR U1
U 1 1 5A294B4E
P 8700 1425
F 0 "U1" H 8700 1675 50  0000 C CNN
F 1 "LD1117S33CTR" H 8700 1625 50  0000 C CNN
F 2 "TO_SOT_Packages_SMD:SOT-223" H 8700 1525 50  0001 C CNN
F 3 "" H 8700 1425 50  0001 C CNN
	1    8700 1425
	1    0    0    -1  
$EndComp
$Comp
L +3.3V #PWR015
U 1 1 5A294EEF
P 9250 1375
F 0 "#PWR015" H 9250 1225 50  0001 C CNN
F 1 "+3.3V" V 9250 1600 50  0000 C CNN
F 2 "" H 9250 1375 50  0001 C CNN
F 3 "" H 9250 1375 50  0001 C CNN
	1    9250 1375
	0    1    1    0   
$EndComp
$Comp
L +12V #PWR016
U 1 1 5A294F1E
P 8150 1375
F 0 "#PWR016" H 8150 1225 50  0001 C CNN
F 1 "+12V" V 8150 1600 50  0000 C CNN
F 2 "" H 8150 1375 50  0001 C CNN
F 3 "" H 8150 1375 50  0001 C CNN
	1    8150 1375
	0    -1   -1   0   
$EndComp
$Comp
L GND #PWR017
U 1 1 5A294F4D
P 8700 1825
F 0 "#PWR017" H 8700 1575 50  0001 C CNN
F 1 "GND" V 8700 1625 50  0000 C CNN
F 2 "" H 8700 1825 50  0001 C CNN
F 3 "" H 8700 1825 50  0001 C CNN
	1    8700 1825
	1    0    0    -1  
$EndComp
Wire Wire Line
	8700 1675 8700 1825
Wire Wire Line
	9100 1375 9250 1375
Wire Wire Line
	8150 1375 8300 1375
$Comp
L C C2
U 1 1 5A295074
P 8950 1725
F 0 "C2" H 8975 1825 50  0000 L CNN
F 1 "C" H 8975 1625 50  0000 L CNN
F 2 "Capacitors_SMD:C_0805" H 8988 1575 50  0001 C CNN
F 3 "" H 8950 1725 50  0001 C CNN
	1    8950 1725
	0    1    1    0   
$EndComp
$Comp
L C C1
U 1 1 5A295100
P 8450 1725
F 0 "C1" H 8475 1825 50  0000 L CNN
F 1 "C" H 8475 1625 50  0000 L CNN
F 2 "Capacitors_SMD:C_0805" H 8488 1575 50  0001 C CNN
F 3 "" H 8450 1725 50  0001 C CNN
	1    8450 1725
	0    1    1    0   
$EndComp
Wire Wire Line
	9100 1725 9175 1725
Wire Wire Line
	9175 1725 9175 1375
Connection ~ 9175 1375
Wire Wire Line
	8250 1375 8250 1725
Wire Wire Line
	8250 1725 8300 1725
Connection ~ 8250 1375
Wire Wire Line
	8600 1725 8800 1725
Connection ~ 8700 1725
Text GLabel 8400 4825 2    60   Input ~ 0
MOTOR_DIR
Text GLabel 8400 4975 2    60   Input ~ 0
MOTOR_STEP
$Comp
L +3.3V #PWR018
U 1 1 5A2EB86A
P 6900 4975
F 0 "#PWR018" H 6900 4825 50  0001 C CNN
F 1 "+3.3V" V 6900 5225 50  0000 C CNN
F 2 "" H 6900 4975 50  0001 C CNN
F 3 "" H 6900 4975 50  0001 C CNN
	1    6900 4975
	0    -1   -1   0   
$EndComp
$Comp
L GND #PWR019
U 1 1 5A2EB8A2
P 6900 4875
F 0 "#PWR019" H 6900 4625 50  0001 C CNN
F 1 "GND" V 6900 4650 50  0000 C CNN
F 2 "" H 6900 4875 50  0001 C CNN
F 3 "" H 6900 4875 50  0001 C CNN
	1    6900 4875
	0    1    1    0   
$EndComp
Text GLabel 8400 5675 2    60   Input ~ 0
MOTOR_ENABLE
Wire Wire Line
	8250 4875 8325 4875
Wire Wire Line
	8325 4875 8325 4825
Wire Wire Line
	8325 4825 8400 4825
Wire Wire Line
	8400 4975 8250 4975
Wire Wire Line
	7050 4875 6900 4875
Wire Wire Line
	6900 4975 7050 4975
$Comp
L CONN_01X04 J5
U 1 1 5A2EBF8D
P 6350 5225
F 0 "J5" H 6575 4900 50  0000 C CNN
F 1 "CONN_01X04" H 6600 4975 50  0000 C CNN
F 2 "Pin_Headers:Pin_Header_Angled_1x04_Pitch2.54mm" H 6350 5225 50  0001 C CNN
F 3 "" H 6350 5225 50  0001 C CNN
	1    6350 5225
	-1   0    0    1   
$EndComp
$Comp
L GND #PWR020
U 1 1 5A2EC268
P 6900 5475
F 0 "#PWR020" H 6900 5225 50  0001 C CNN
F 1 "GND" V 6900 5250 50  0000 C CNN
F 2 "" H 6900 5475 50  0001 C CNN
F 3 "" H 6900 5475 50  0001 C CNN
	1    6900 5475
	0    1    1    0   
$EndComp
$Comp
L +12V #PWR021
U 1 1 5A2EC2F3
P 6900 5575
F 0 "#PWR021" H 6900 5425 50  0001 C CNN
F 1 "+12V" V 6900 5800 50  0000 C CNN
F 2 "" H 6900 5575 50  0001 C CNN
F 3 "" H 6900 5575 50  0001 C CNN
	1    6900 5575
	0    -1   -1   0   
$EndComp
Wire Wire Line
	6550 5075 7050 5075
Wire Wire Line
	7050 5175 6550 5175
Wire Wire Line
	6550 5275 7050 5275
Wire Wire Line
	7050 5375 6550 5375
Wire Wire Line
	6900 5475 7050 5475
Wire Wire Line
	7050 5575 6900 5575
NoConn ~ 7000 1300
NoConn ~ 5900 1600
NoConn ~ 5900 1700
$Comp
L TMC2130 U3
U 1 1 5A56765A
P 7650 5225
F 0 "U3" H 7650 5675 60  0000 C CNN
F 1 "TMC2130" V 7650 5225 50  0000 C CNN
F 2 "a4988:A4988SMD" H 7650 5225 60  0001 C CNN
F 3 "" H 7650 5225 60  0001 C CNN
	1    7650 5225
	1    0    0    -1  
$EndComp
Text GLabel 8400 5525 2    60   Input ~ 0
MOSI
Text GLabel 8400 5125 2    60   Input ~ 0
MISO
Text GLabel 8400 5250 2    60   Input ~ 0
CS
Text GLabel 8400 5400 2    60   Input ~ 0
SCK
Wire Wire Line
	8250 5175 8325 5175
Wire Wire Line
	8325 5175 8325 5125
Wire Wire Line
	8325 5125 8400 5125
Wire Wire Line
	8400 5250 8325 5250
Wire Wire Line
	8325 5250 8325 5275
Wire Wire Line
	8325 5275 8250 5275
Wire Wire Line
	8250 5375 8325 5375
Wire Wire Line
	8325 5375 8325 5400
Wire Wire Line
	8325 5400 8400 5400
Wire Wire Line
	8250 5475 8325 5475
Wire Wire Line
	8325 5475 8325 5525
Wire Wire Line
	8325 5525 8400 5525
Wire Wire Line
	8250 5575 8325 5575
Wire Wire Line
	8325 5575 8325 5675
Wire Wire Line
	8325 5675 8400 5675
Text GLabel 7500 4075 3    60   Input ~ 0
MISO
Text GLabel 7375 4075 3    60   Input ~ 0
CS
Text GLabel 7925 4075 3    60   Input ~ 0
SCK
Text GLabel 7800 4075 3    60   Input ~ 0
MOSI
Wire Wire Line
	7500 4075 7500 3950
Wire Wire Line
	7400 3950 7400 4025
Wire Wire Line
	7400 4025 7375 4025
Wire Wire Line
	7375 4025 7375 4075
Wire Wire Line
	7800 3950 7800 4075
Wire Wire Line
	7925 4075 7925 4025
Wire Wire Line
	7925 4025 7900 4025
Wire Wire Line
	7900 4025 7900 3950
$Comp
L CONN_01X03 J2
U 1 1 5A5683AA
P 3200 2525
F 0 "J2" H 3200 2725 50  0000 C CNN
F 1 "CONN_01X03" V 3300 2525 50  0000 C CNN
F 2 "Pin_Headers:Pin_Header_Angled_1x03_Pitch2.54mm" H 3200 2525 50  0001 C CNN
F 3 "" H 3200 2525 50  0001 C CNN
	1    3200 2525
	1    0    0    -1  
$EndComp
Wire Wire Line
	2900 2425 3000 2425
Wire Wire Line
	3000 2625 2900 2625
NoConn ~ 8250 5075
NoConn ~ 6750 2850
$EndSCHEMATC
